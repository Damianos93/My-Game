class Emperor {
    constructor(position) {
        // this.position = position;
    }
    moveEmperor(event) {
        switch (event.key) {
            case "w":
                event.preventDefault()
                moveUp(this)
                break;
            case "s":
                event.preventDefault()
                moveDown(this)
                break;
            case "q":
                event.preventDefault()
                throwLightning()
                break;
            default:
                break;
        }
    }

    render() {
        let emperorP = document.createElement("img")
        emperorP.src = "./images/emperoris.gif"
        let gameArea = document.getElementById("gameArea")
        emperorP.style.position = "fixed"
        emperorP.style.left = "88rem";
        gameArea.append(emperorP)
    }


    throwLightning() {
        let light = createLightElement()
        gameArea.appendChild(light)
        let lightThrow = new Audio('./music/wooooosh.wav')
        lightThrow.play()
        moveLightning(light)
        // cookieThrow.pause()
    }


    createLightElement() {
        let xPosition = parseInt(window.getComputedStyle(emperor).getPropertyValue('right'))
        let yPosition = parseInt(window.getComputedStyle(emperor).getPropertyValue('top'))
        let newLight = document.createElement('img')
        newLight.src = './images/lights.gif'
        newLight.classList.add('light')
        newLight.style.right = `${xPosition}px`
        newLight.style.top = `${yPosition - 10}px`
        return newLight;
    }


    moveLightning(light) {
        let lightInterval = setInterval(() => {
            let xPosition = parseInt(light.style.right)
            if (xPosition === window.innerWidth) {
                light.remove()
            } else {
                light.style.right = `${xPosition + 4}px`
            }
        }, 1)
    }
     moveUp(person) {
        let topPosition = window.getComputedStyle(person).getPropertyValue('top')
        if (person.style.top === "0px") {
            return
        } else {
            if (person === game.vader) {
                let position = parseInt(topPosition)
                position -= 17
                person.style.top = `${position}px`
            }
            else {
                let position = parseInt(topPosition)
                position -= 30
                person.style.top = `${position}px`
            }
        }
    }
    
     moveDown(person) {
        let topPosition = window.getComputedStyle(person).getPropertyValue('top')
        if ((fromPxToNumber(person.style.top) + person.height) >= window.innerHeight) {
            position = 0;
            person.style.top = `${position}px`
            return
        } else {
            if (person === vader) {
                let position = parseInt(topPosition)
                position += 17
                person.style.top = `${position}px`
            }
            else {
                let position = parseInt(topPosition)
                position += 35
                person.style.top = `${position}px`
            }
        }
    }
     fromPxToNumber(pixel) {
        return parseInt(pixel.split("px")[0])
    }
}
